# genversion

[![npm version](https://badge.fury.io/js/genversion.svg)](https://www.npmjs.com/package/genversion)

So you want yourmodule.version to follow the version in package.json but are tired of updating it manually every time the version changes? You could import your package.json into the module but you know it is a naughty thing to do! Genversion to the rescue!

Usage is simple. First install via npm.

    $ npm install genversion --save-dev

Genversion works by first reading the current version from package.json and then generating a simple CommonJS module file that exports the version:

    module.exports = '1.2.3';

Your job is to 1) choose a name for the file, 2) import the new file into your module, and 3) add genversion as a part of your build or release pipeline. For example, let us choose 'lib/version.js' and import it into yourmodule.

    // yourmodule/index.js
    exports.version = require('./lib/version');

Then let us add genversion into our build. The target filename is given as the first argument. If the file already exists, it is replaced with the new one. But do not worry, genversion will only replace files generated by genversion itself.

    "scripts": {
      "build": "genversion lib/version.js && other build stuff"
    }

After this, your module has a version property that matches with package.json and is updated every time you build the project.

    > var yourmodule = require('yourmodule')
    > yourmodule.version
    '1.2.3'

Great! Having a version property in your module is very convenient for debugging. More than once we have needed to debug a module for a long time just to find that it was a cached old version that caused the error. An inspectable version property would have helped a big time.



## Related projects

- [versiony](https://github.com/ciena-blueplanet/versiony)
- [package-json-versionify](https://github.com/nolanlawson/package-json-versionify)



## License

[MIT](LICENSE)
